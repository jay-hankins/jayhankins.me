{"data":{"site":{"siteMetadata":{"title":"Jay's Blog","author":"Jay Hankins"}},"markdownRemark":{"id":"83d73b2e-b856-5c91-95ad-a50e27300f34","excerpt":"I’m not as familiar with the Ruby and Jekyll ecosystems as I’d like to be, so all I know how to do is follow a GitHub Pages help article which tells me how to…","html":"<p>I’m not as familiar with the Ruby and Jekyll ecosystems as I’d like to be, so all I know how to do is follow a GitHub Pages <a href=\"https://help.github.com/articles/setting-up-your-github-pages-site-locally-with-jekyll/\">help article</a> which tells me how to set up the GH-Pages environment on my system.</p>\n<p>Hoewver, I ran into an issue on macOS High Sierra 10.13.2 and ruby 2.5.0 from Homebrew. When I went to install the GitHub Pages gems to my local directory using <code class=\"language-text\">bundle install</code>, I got this error:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Installing json 1.8.3 with native extensions\nGem::Ext::BuildError: ERROR: Failed to build gem native extension.\n...\nAn error occurred while installing json (1.8.3), and Bundler cannot continue.\nMake sure that `gem install json -v &#39;1.8.3&#39;` succeeds before bundling.</code></pre></div>\n<p>Well, from <a href=\"https://github.com/flori/json/issues/253\">this issue</a> it seems that macOS Sierra and High Sierra with ruby v 2.4 onwards is not compatible with <code class=\"language-text\">json</code> 1.8.3.</p>\n<p>I don’t know exactly why this happens, but a workaround for now is to modify the Gemfile and add this line to it:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">gem &#39;json&#39;, github: &#39;flori/json&#39;, branch: &#39;v1.8&#39;</code></pre></div>\n<p>If you have the default GitHub Pages help article Gemfile, it will look like this after correction:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">source &#39;https://rubygems.org&#39;\ngem &#39;json&#39;, github: &#39;flori/json&#39;, branch: &#39;v1.8&#39;\ngem &#39;github-pages&#39;, group: :jekyll_plugins</code></pre></div>\n<p>Now you can <code class=\"language-text\">bundle install</code> and <code class=\"language-text\">bundle exec jekyll serve</code> to see your site built locally again. Nice!</p>\n<p>P.S. Can anyone tell me why the following happens? “jekyll serve” errors, but “bundle exec jekyll serve” runs everything hunky-dory.</p>\n<p>Output:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">~/dev/personal/jay-hankins.github.io master* 1m\n❯ jekyll serve\nTraceback (most recent call last):\n\t10: from /usr/local/bin/jekyll:23:in `&lt;main&gt;&#39;\n\t 9: from /usr/local/bin/jekyll:23:in `load&#39;\n\t 8: from /usr/local/lib/ruby/gems/2.5.0/gems/jekyll-3.6.2/exe/jekyll:11:in `&lt;top (required)&gt;&#39;\n\t 7: from /usr/local/lib/ruby/gems/2.5.0/gems/jekyll-3.6.2/lib/jekyll/plugin_manager.rb:50:in `require_from_bundler&#39;\n\t 6: from /usr/local/Cellar/ruby/2.5.0/lib/ruby/2.5.0/bundler.rb:107:in `setup&#39;\n\t 5: from /usr/local/Cellar/ruby/2.5.0/lib/ruby/2.5.0/bundler/runtime.rb:26:in `setup&#39;\n\t 4: from /usr/local/Cellar/ruby/2.5.0/lib/ruby/2.5.0/bundler/runtime.rb:26:in `map&#39;\n\t 3: from /usr/local/Cellar/ruby/2.5.0/lib/ruby/2.5.0/forwardable.rb:229:in `each&#39;\n\t 2: from /usr/local/Cellar/ruby/2.5.0/lib/ruby/2.5.0/forwardable.rb:229:in `each&#39;\n\t 1: from /usr/local/Cellar/ruby/2.5.0/lib/ruby/2.5.0/bundler/runtime.rb:31:in `block in setup&#39;\n/usr/local/Cellar/ruby/2.5.0/lib/ruby/2.5.0/bundler/runtime.rb:313:in `check_for_activated_spec!&#39;: You have already activated json 2.1.0, but your Gemfile requires json 1.8.6. Since json is a default gem, you can either remove your dependency on it or try updating to a newer version of bundler that supports json as a default gem. (Gem::LoadError)\n\n~/dev/personal/jay-hankins.github.io master*\n❯ bundle exec jekyll serve\nConfiguration file: /Users/jay/dev/personal/jay-hankins.github.io/_config.yml\n       Deprecation: The &#39;gems&#39; configuration option has been renamed to &#39;plugins&#39;. Please update your config file accordingly.\n            Source: /Users/jay/dev/personal/jay-hankins.github.io\n       Destination: /Users/jay/dev/personal/jay-hankins.github.io/_site\n Incremental build: disabled. Enable with --incremental\n      Generating...\n   GitHub Metadata: No GitHub API authentication could be found. Some fields may be missing or have incorrect data.\n                    done in 1.912 seconds.\n Auto-regeneration: enabled for &#39;/Users/jay/dev/personal/jay-hankins.github.io&#39;\n    Server address: http://127.0.0.1:4000\n  Server running... press ctrl-c to stop.</code></pre></div>\n<p>P.P.S. I need recommendations on a successor to Jekyll. I’m thinking of some React or Vue static server side something something… tell me your faves!</p>","frontmatter":{"title":"Solution: GitHub Pages Build Failure Due to Error Installing json (1.8.3)","date":"January 29, 2018","published":null}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/2018/2018-01-29-json-gem-native-extensions-for-local-github-pages/","previous":{"fields":{"slug":"/2017/2017-01-01-quickly-switch-github-remote-protocol/"},"frontmatter":{"title":"Quickly Switch GitHub Remote Protocol","published":false}},"next":{"fields":{"slug":"/2018/reporting-ios-bugs/"},"frontmatter":{"title":"Reporting iOS Bugs","published":null}}}}